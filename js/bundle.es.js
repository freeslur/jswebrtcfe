
  /**
   * @license
   * jswebrtcfe.js v1.0.0
   * Released under the MIT License.
   */

import { io } from 'socket.io-client';

const socket = io.connect("http://176.34.63.148:3000", {
  secure: false
});
const welcome = document.getElementById("welcome");
const call = document.getElementById("call");
const myFace = document.getElementById("myFace");
const muteBtn = document.getElementById("mute");
const cameraBtn = document.getElementById("camera");
const camerasSelect = document.getElementById("cameras");
call.hidden = true;
let myStream;
let muted = false;
let cameraOff = false;

async function getCameras() {
  try {
    const devices = navigator.mediaDevices.enumerateDevices();
    const cameras = (await devices).filter(device => device.kind == "videoinput");
    const currentCamera = myStream.getVideoTracks()[0];
    cameras.forEach(camera => {
      const option = document.createElement("option");
      option.value = camera.deviceId;
      option.innerText = camera.label;

      if (currentCamera.deviceId === camera.deviceId) {
        option.selected = true;
      }

      camerasSelect.appendChild(option);
    });
  } catch (e) {
    console.log(e);
  }
}

async function getMedia(deviceId) {
  const initialConstrains = {
    audio: true,
    video: {
      facingMode: "user"
    }
  };
  const cameraConstrains = {
    audio: true,
    video: {
      deviceId: {
        exact: deviceId
      }
    }
  };

  try {
    myStream = await navigator.mediaDevices.getUserMedia(deviceId ? cameraConstrains : initialConstrains);
    myFace.srcObject = myStream;

    if (!deviceId) {
      await getCameras();
    }
  } catch (e) {
    console.log(e.message);
  }
}

muteBtn.addEventListener("click", () => {
  myStream.getAudioTracks().forEach(track => {
    track.enabled = !track.enabled;
  });

  if (!muted) {
    muteBtn.innerText = "Unmute";
    muted = true;
  } else {
    muteBtn.innerText = "Mute";
    muted = false;
  }
});

function handleVideoOff() {
  myStream.getVideoTracks().forEach(track => {
    track.enabled = !track.enabled;
  });

  if (!cameraOff) {
    cameraBtn.innerText = "Turn Camera On";
    cameraOff = true;
  } else {
    cameraBtn.innerText = "Turn Camera Off";
    cameraOff = false;
  }
}

cameraBtn.addEventListener("click", handleVideoOff);

async function handleCameraChange() {
  await getMedia(camerasSelect.value);
}

camerasSelect.addEventListener("input", handleCameraChange);
const welcomeForm = welcome.querySelector("form");

function handleWelcomeSubmit(event) {
  event.preventDefault();
  const input = welcomeForm.querySelector("input");
  console.log(input.value);
}

welcomeForm.addEventListener("submit", handleWelcomeSubmit);
socket.on("connection", () => console.log("Socket io connected."));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmVzLmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvanMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlvIH0gZnJvbSBcInNvY2tldC5pby1jbGllbnRcIjtcblxuY29uc3Qgc29ja2V0ID0gaW8uY29ubmVjdChcImh0dHA6Ly8xNzYuMzQuNjMuMTQ4OjMwMDBcIiwgeyBzZWN1cmU6IGZhbHNlIH0pO1xuY29uc3Qgd2VsY29tZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VsY29tZVwiKTtcbmNvbnN0IGNhbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGxcIik7XG5jb25zdCBteUZhY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15RmFjZVwiKTtcbmNvbnN0IG11dGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm11dGVcIik7XG5jb25zdCBjYW1lcmFCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbWVyYVwiKTtcbmNvbnN0IGNhbWVyYXNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbWVyYXNcIik7XG5cbmNhbGwuaGlkZGVuID0gdHJ1ZTtcblxubGV0IG15U3RyZWFtO1xubGV0IG11dGVkID0gZmFsc2U7XG5sZXQgY2FtZXJhT2ZmID0gZmFsc2U7XG5cbmFzeW5jIGZ1bmN0aW9uIGdldENhbWVyYXMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGV2aWNlcyA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpO1xuICAgIGNvbnN0IGNhbWVyYXMgPSAoYXdhaXQgZGV2aWNlcykuZmlsdGVyKChkZXZpY2UpID0+IGRldmljZS5raW5kID09IFwidmlkZW9pbnB1dFwiKTtcbiAgICBjb25zdCBjdXJyZW50Q2FtZXJhID0gbXlTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtcbiAgICBjYW1lcmFzLmZvckVhY2goKGNhbWVyYSkgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgIG9wdGlvbi52YWx1ZSA9IGNhbWVyYS5kZXZpY2VJZDtcbiAgICAgIG9wdGlvbi5pbm5lclRleHQgPSBjYW1lcmEubGFiZWw7XG4gICAgICBpZiAoY3VycmVudENhbWVyYS5kZXZpY2VJZCA9PT0gY2FtZXJhLmRldmljZUlkKSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBjYW1lcmFzU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRNZWRpYShkZXZpY2VJZCkge1xuICBjb25zdCBpbml0aWFsQ29uc3RyYWlucyA9IHtcbiAgICBhdWRpbzogdHJ1ZSxcbiAgICB2aWRlbzogeyBmYWNpbmdNb2RlOiBcInVzZXJcIiB9LFxuICB9O1xuICBjb25zdCBjYW1lcmFDb25zdHJhaW5zID0ge1xuICAgIGF1ZGlvOiB0cnVlLFxuICAgIHZpZGVvOiB7IGRldmljZUlkOiB7IGV4YWN0OiBkZXZpY2VJZCB9IH0sXG4gIH07XG4gIHRyeSB7XG4gICAgbXlTdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShkZXZpY2VJZCA/IGNhbWVyYUNvbnN0cmFpbnMgOiBpbml0aWFsQ29uc3RyYWlucyk7XG4gICAgbXlGYWNlLnNyY09iamVjdCA9IG15U3RyZWFtO1xuICAgIGlmICghZGV2aWNlSWQpIHtcbiAgICAgIGF3YWl0IGdldENhbWVyYXMoKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO1xuICB9XG59XG5cbm11dGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgIHRyYWNrLmVuYWJsZWQgPSAhdHJhY2suZW5hYmxlZDtcbiAgfSk7XG4gIGlmICghbXV0ZWQpIHtcbiAgICBtdXRlQnRuLmlubmVyVGV4dCA9IFwiVW5tdXRlXCI7XG4gICAgbXV0ZWQgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIG11dGVCdG4uaW5uZXJUZXh0ID0gXCJNdXRlXCI7XG4gICAgbXV0ZWQgPSBmYWxzZTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZVZpZGVvT2ZmKCkge1xuICBteVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgdHJhY2suZW5hYmxlZCA9ICF0cmFjay5lbmFibGVkO1xuICB9KTtcbiAgaWYgKCFjYW1lcmFPZmYpIHtcbiAgICBjYW1lcmFCdG4uaW5uZXJUZXh0ID0gXCJUdXJuIENhbWVyYSBPblwiO1xuICAgIGNhbWVyYU9mZiA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgY2FtZXJhQnRuLmlubmVyVGV4dCA9IFwiVHVybiBDYW1lcmEgT2ZmXCI7XG4gICAgY2FtZXJhT2ZmID0gZmFsc2U7XG4gIH1cbn1cblxuY2FtZXJhQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVWaWRlb09mZik7XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNhbWVyYUNoYW5nZSgpIHtcbiAgYXdhaXQgZ2V0TWVkaWEoY2FtZXJhc1NlbGVjdC52YWx1ZSk7XG59XG5cbmNhbWVyYXNTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGhhbmRsZUNhbWVyYUNoYW5nZSk7XG5cbmNvbnN0IHdlbGNvbWVGb3JtID0gd2VsY29tZS5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcblxuZnVuY3Rpb24gaGFuZGxlV2VsY29tZVN1Ym1pdChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dCA9IHdlbGNvbWVGb3JtLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgY29uc29sZS5sb2coaW5wdXQudmFsdWUpO1xufVxuXG53ZWxjb21lRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVdlbGNvbWVTdWJtaXQpO1xuXG5zb2NrZXQub24oXCJjb25uZWN0aW9uXCIsICgpID0+IGNvbnNvbGUubG9nKFwiU29ja2V0IGlvIGNvbm5lY3RlZC5cIikpO1xuIl0sIm5hbWVzIjpbInNvY2tldCIsImlvIiwiY29ubmVjdCIsInNlY3VyZSIsIndlbGNvbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2FsbCIsIm15RmFjZSIsIm11dGVCdG4iLCJjYW1lcmFCdG4iLCJjYW1lcmFzU2VsZWN0IiwiaGlkZGVuIiwibXlTdHJlYW0iLCJtdXRlZCIsImNhbWVyYU9mZiIsImdldENhbWVyYXMiLCJkZXZpY2VzIiwibmF2aWdhdG9yIiwibWVkaWFEZXZpY2VzIiwiZW51bWVyYXRlRGV2aWNlcyIsImNhbWVyYXMiLCJmaWx0ZXIiLCJkZXZpY2UiLCJraW5kIiwiY3VycmVudENhbWVyYSIsImdldFZpZGVvVHJhY2tzIiwiZm9yRWFjaCIsImNhbWVyYSIsIm9wdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJ2YWx1ZSIsImRldmljZUlkIiwiaW5uZXJUZXh0IiwibGFiZWwiLCJzZWxlY3RlZCIsImFwcGVuZENoaWxkIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJnZXRNZWRpYSIsImluaXRpYWxDb25zdHJhaW5zIiwiYXVkaW8iLCJ2aWRlbyIsImZhY2luZ01vZGUiLCJjYW1lcmFDb25zdHJhaW5zIiwiZXhhY3QiLCJnZXRVc2VyTWVkaWEiLCJzcmNPYmplY3QiLCJtZXNzYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldEF1ZGlvVHJhY2tzIiwidHJhY2siLCJlbmFibGVkIiwiaGFuZGxlVmlkZW9PZmYiLCJoYW5kbGVDYW1lcmFDaGFuZ2UiLCJ3ZWxjb21lRm9ybSIsInF1ZXJ5U2VsZWN0b3IiLCJoYW5kbGVXZWxjb21lU3VibWl0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
